!function(){"use strict";angular.module("app.common",[])}(),function(){"use strict";function t(t,n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=decodeURIComponent(t.location.href),e="[\\?&]"+n+"=([^&#]*)",o=new RegExp(e),i=o.exec(a);return null===i?null:i[1].replace("/","")}function n(t,n,a){t.location.href=e(t.location.href,n,a)}function a(t,n,a){var e=angular.copy(t);return e=e.replace("/",""),e=e.replace("?",""),e=n+"="+a.toString()+"&"+e,"/?"+e}function e(t,n,a){var e,o,i,c=!0;t.indexOf("#")>0?(e=t.indexOf("#"),o=t.substring(t.indexOf("#"),t.length)):(o="",e=t.length),i=t.substring(0,e);var r=i.split("?"),l="";if(r.length>1)for(var s=r[1].split("&"),d=0;d<s.length;d++){var u=s[d].split("=");c&&u[0]===n||(""===l?l="?":l+="&",l+=u[0]+"="+(u[1]?u[1]:""))}return""===l&&(l="?"),""!==l&&"?"!==l&&(l+="&"),l+=n+"="+(a?a:""),r[0]+l+o}function o(t,n,a){function e(){var n=o?"?"+o+"#":"#";i=i.replace(/\?.*#/,n),t.location.replace(i)}var o=angular.copy(t.location.search),i=angular.copy(t.location.href);o=o.replace("?",""),_.each(n,function(t){var n=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),a="&?"+n+"=([^&#]*)",e=new RegExp(a);o=o.replace(e,"")}),_.startsWith(o,"&")&&(o=o.replace("&","")),e()}angular.module("app.common").provider("urlHelper",function(){this.getUrlParam=t,this.$get=function(){return{getUrlParam:t,insertParam:n,removeParam:o,addParamToStringUrl:a}}})}(),function(){"use strict";angular.module("app.common").factory("modalService",["$uibModal","$rootScope",function(t,n){function a(a){if(a.templateUrl||a.template){var e,o={scope:n.$new(),controllerAs:"vm",backdrop:"static"};return angular.extend(o,a),e=t.open(o),e.result}}function e(t,n){return c(t,n,"modal-default notification")}function o(t){return c(t.header,t.message,"modal-default confirmation",t.cancel,t.okName,t.className)}function i(t,n){return t=n?t+"<br/>Correlation ID: "+n:t,c("Error",t,"error")}function c(n,a,e,o,i,c){var r=t.open({templateUrl:"app/core/services/modal/modal.html",controller:"modalCtrl",controllerAs:"vm",backdrop:"static",windowClass:c,resolve:{data:function(){return{header:n,message:a,typeCss:e,cancel:o,okName:i||"ok"}}}});return r.result}return{showNotification:e,showError:i,showModal:a,showConfirmationModal:o}}])}(),function(){"use strict";function t(t,n){function a(){t.close()}function e(){t.dismiss()}var o=this;o.data=n,o.ok=a,o.close=e}t.$inject=["$uibModalInstance","data"],angular.module("app.common").controller("modalCtrl",t)}(),function(){"use strict";function t(t){function n(){t.$emit("toggleLoadingBlock",!0)}function a(){t.$emit("toggleLoadingBlock",!1)}return{show:n,hide:a}}t.$inject=["$rootScope"],angular.module("app.common").factory("loadingBlock",t)}(),function(){"use strict";angular.module("app",["ngResource","ngAnimate","ngCookies","ngTouch","ngSanitize","ui.router","ui.bootstrap","ui.bootstrap.tpls","ngMessages","LocalStorageModule","app.common","uiSwitch","toggle-switch"])}(),function(){"use strict";function t(t,n){function a(){return t.get(n.api("getTemp"),t.transform(function(t){return t}))}return{getTemp:a}}t.$inject=["$http","urls"],angular.module("app").config(["urlsProvider",function(t){t.endpoint("getTemp",{api:function(){return"gettemp"},isMocked:!1})}]),angular.module("app.common").factory("dataService",t)}(),function(){"use strict";function t(t,n){function a(a){return t.post(n.api("sendAction"),a,t.transform(function(t){return t}))}function e(){return t.get(n.api("getActions"),t.transform(function(t){return t}))}return{sendAction:a,getActionsList:e}}t.$inject=["$http","urls"],angular.module("app").config(["urlsProvider",function(t){t.endpoint("sendAction",{api:function(){return"actions"},isMocked:!1}).endpoint("getActions",{api:function(){return"actionsList"},isMocked:!1})}]),angular.module("app.common").factory("actionService",t)}(),function(){"use strict";function t(){return{restrict:"E",templateUrl:"app/core/directives/lamp-plate/lamp-plate.template.html",controller:n,replace:!0,controllerAs:"vm",scope:{},bindToController:!0}}function n(t,n){function a(){o.isLoading=!0}function e(){var n={type:"switch",pin:6,state:!o.switchState};t.sendAction(n).then(function(){})}var o=this;o.toggle=e,o.switchState=!1,a(),n.$on("$destroy",n.$watch(function(){return n.vm.switchState},function(){e()}))}n.$inject=["actionService","$scope"],angular.module("app.common").directive("lampPlate",t)}(),function(){"use strict";function t(t,n){t.state("shell",{url:"","abstract":!0,templateUrl:"app/pages/shell/shell.html",controller:"shellCtrl",controllerAs:"shell"})}t.$inject=["$stateProvider","settings"],angular.module("app").config(t)}(),function(){"use strict";function t(t,n,a,e,o){function i(){l.menuIsOpen=!0}function c(){l.menuIsOpen=!1}function r(){o.location.reload(!0)}var l=this;l.menuIsOpen=!1,l.openMenu=i,l.closeMenu=c,l.refresh=r,t.pageTitle=n.current.title,t.appName=a.environmentName,e.$on("$destroy",e.$on("$locationChangeStart",function(){l.menuIsOpen=!1,l.hidden=!1})),e.$on("$destroy",t.$on("toggleMenu",function(){l.menuIsOpen=!l.menuIsOpen})),e.$on("$destroy",t.$on("desktopToggle",function(){l.hidden=!l.hidden}))}t.$inject=["$rootScope","$state","settings","$scope","$window"],angular.module("app").controller("shellCtrl",t)}(),function(){"use strict";angular.module("app").config(["$stateProvider",function(t){t.state("shell.home",{url:"/home",templateUrl:"app/pages/home/home.html",controller:"homeCtrl",title:"Home",controllerAs:"vm"})}])}(),function(){"use strict";function t(t,n){function a(){o.isLoading=!0,e()}function e(){t.getActionsList().then(function(t){o.actions=t.data})}var o=this;o.switchState=!1,o.actions=[],o.deviceTypes=n.deviceTypes,a()}t.$inject=["actionService","enums"],angular.module("app").controller("homeCtrl",t)}(),function(){"use strict";angular.module("app").config(["$stateProvider",function(t){t.state("shell.page404",{url:"/404",templateUrl:"app/pages/404/page404.html",controller:"page404Ctrl",title:"Page does not exist",controllerAs:"vm"})}])}(),function(){"use strict";function t(t){function n(){t.getManagerInfo().then(function(t){a.accountManager=t.data})}var a=this;a.accountManager={},n()}t.$inject=["authService"],angular.module("app").controller("page404Ctrl",t)}(),function(){"use strict";function t(t){function n(n){return t.showModal({templateUrl:"app/modals/confirmationModal/confirmationModal.html",controller:"confirmationModalCtrl",controllerAs:"vm",backdrop:"static",resolve:{data:function(){return{header:n.header,message:n.text,typeCss:n.typeCss,cancel:n.cancel,confirmBtn:n.confirmBtn||"ok"}}}})}return{show:n}}t.$inject=["modalService"],angular.module("app").factory("confirmationModal",t)}(),function(){"use strict";function t(t,n){function a(){t.dismiss()}function e(){t.close()}var o=this;o.close=a,o.confirm=e,o.modalOptions=n}t.$inject=["$uibModalInstance","data"],angular.module("app").controller("confirmationModalCtrl",t)}(),function(){"use strict";function t(t,n){function a(t){var a=o[t];if(!a)throw new Error("There is no such endpoint named: "+t);var e=_.slice(arguments,1,arguments.length),i=a.api,c=angular.isString(i)?i:i.apply({},e);return n.testMode||a.isMocked?c:n.apiUrl+"/"+c}function e(t){return o[t].mock}var o=this.endpoints;return{api:a,mock:e}}t.$inject=["$window","settings"],angular.module("app.common").provider("urls",function(){function n(t,n){if(a[t])throw new Error("You have already declared endpoint URL with the same name.Endpoint: "+t);return a[t]=n,this}var a={};return{endpoints:a,endpoint:n,$get:t}})}(),function(){"use strict";angular.module("app.common").config(["$provide",function(t){t.decorator("$http",["$delegate","$log",function(t,n){return t.transform=function(t){return{transformResponse:[function(a,e,o){var i,c=null;return o>=200&&299>=o?(c=a?angular.fromJson(a):null,t(c)):(i={error:!0,data:a,headersGetter:e,status:o,extraInfo:"handled by transformResponse in httpExtensions.js"},401!==o?n.error(i):n.log(i),i)}]}},t}])}])}(),function(){"use strict";angular.module("app").constant("loadingBlockCfg",{startWithLoader:!1})}(),function(){"use strict";function t(t,a){n.cachedCompileProvider=t}t.$inject=["$compileProvider","$provide"];var n=angular.module("app.common").config(t)}(),function(){"use strict";angular.module("app").constant("settings",angular.extend({},{apiUrl:"http://192.168.1.38"},window.PUBLISH_SETTINGS))}(),function(){"use strict";function t(t,n,a,e,o,i,c,r){function l(){r.getTemp().then(function(n){n.data&&0!==n.data.temp&&0!==n.data.humidity&&(t.tempData=n.data)})}l(),c(function(){l()},2e4)}t.$inject=["$rootScope","$state","$stateParams","$location","$document","$window","$interval","dataService"],angular.module("app").run(t)}(),function(){"use strict";function t(t,n,a){n.otherwise("/home")}t.$inject=["$stateProvider","$urlRouterProvider","settings"],angular.module("app").config(t)}(),function(){"use strict";angular.module("app").constant("enums",{deviceTypes:{lightPulp:"lightPulp",rgb:"rgb"}})}(),function(){"use strict";function t(t,n){}t.$inject=["settings","$httpProvider"],angular.module("app").config(t)}(),angular.module("app").run(["$templateCache",function(t){t.put("app/pages/404/page404.html",'<div class="not-found-page"><h1 class="header" data-test-header="">Page does not exist.</h1><p class="paragraph">The page you are looking for no longer exists.</p><p class="paragraph">We are sorry for any inconvenience that this may have caused.</p><p class="paragraph"><span>Please select another page in the menu or</span> <a data-test-manager="" href="mailto:{{vm.accountManager.email}}"><span>contact your Account Manager.</span></a></p></div>'),t.put("app/pages/home/home.html",'<div class="home-page"><div ng-repeat="action in vm.actions"><div><lamp-plate ng-if="action.deviceType === vm.deviceTypes.lightPulp"></lamp-plate></div></div><div>здоровенных размеров кек!</div></div>'),t.put("app/pages/shell/shell.html",'<div class="shell"><div class="demo-layout-transparent mdl-layout mdl-js-layout"><header class="mdl-layout__header mdl-layout__header--transparent"><div class="mdl-layout__header-row"><span class="mdl-layout-title">Smart home</span><div class="mdl-layout-spacer"></div><nav class="mdl-navigation"><div class="" ng-if="tempData">Temperature - {{tempData.temp}}C</div><div class="" ng-if="tempData">Humidity - {{tempData.humidity}}%</div><div ng-click="vm.refresh()" class="refresh__btn">Refresh</div></nav></div></header><div class="mdl-layout__drawer"><span class="mdl-layout-title">Title</span><nav class="mdl-navigation"><a class="mdl-navigation__link" href="">Link</a> <a class="mdl-navigation__link" href="">Link</a> <a class="mdl-navigation__link" href="">Link</a> <a class="mdl-navigation__link" href="">Link</a></nav></div><main class="mdl-layout__content"><div class="heading-background"><div class="data-block" ng-if="tempData">Humidity - {{tempData.humidity}}%</div><div class="data-block" ng-if="tempData">Temp - {{tempData.temp}}°C</div></div><div ui-view=""></div></main></div></div>'),t.put("app/modals/confirmationModal/confirmationModal.html",'<div class="modal-default confirmation" data-test-modal=""><div class="modal-header" data-test-confirmation-title=""><span click-target-name="Close" class="glyphicon glyphicon-remove-sign glyphicon-close" ng-click="vm.close()" data-test-modal-close=""></span> {{vm.modalOptions.header}}</div><div class="modal-body" data-test-confirmation-modal="" ng-bind="vm.modalOptions.message"></div><div class="modal-actions"><div class="action"><button click-target-name="Ok" class="btn btn-action" data-test-modal-btn-ok="" ng-click="vm.confirm()">{{vm.modalOptions.confirmBtn}}</button></div><div ng-if="vm.modalOptions.cancel" class="action"><button click-target-name="Cancel" class="btn btn-action" data-test-modal-btn-cancel="" ng-click="vm.close()">cancel</button></div></div></div>'),t.put("app/core/directives/lamp-plate/lamp-plate.template.html",'<div class="lamp-plate"><div class="mdl-card mdl-shadow--2dp"><div class="mdl-card__title"><h2 class="mdl-card__title-text">Light pulp</h2></div><div class="mdl-card__supporting-text">This is a simple light pulp just to demonstrate controller in action, just switch toggle on and off to see what will happen...</div><div class="mdl-card__actions mdl-card--border"><div class="switch-container"><toggle-switch ng-model="vm.switchState" class="switch-mini"></toggle-switch></div></div><div class="mdl-card__menu"></div></div></div>'),t.put("app/core/services/modal/modal.html",'<div ng-class="vm.data.typeCss" data-test-modal=""><div class="modal-header" data-test-confirmation-title=""><span click-target-name="Close" class="glyphicon glyphicon-remove-sign glyphicon-close" ng-click="vm.close()" data-test-modal-close=""></span> {{vm.data.header}}</div><div class="modal-body" data-test-confirmation-modal="" ng-bind-html="vm.data.message"></div><div class="modal-actions"><div ng-if="vm.data.cancel" class="action"><button click-target-name="Cancel" class="btn btn-action" data-test-modal-btn-cancel="" ng-click="vm.close()">cancel</button></div><div class="action"><button click-target-name="Ok" class="btn btn-action" data-test-modal-btn-ok="" ng-click="vm.ok()">{{vm.data.okName}}</button></div></div></div>')}]);